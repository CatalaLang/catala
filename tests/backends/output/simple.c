/* This file has been generated by the Catala compiler, do not edit! */

#include <stdio.h>
#include <stdlib.h>
#include <runtime.c>

enum Option_2_code {
  Option_2_None_2,
  Option_2_Some_2
} Option_2_code;

typedef struct Option_2 {
  enum Option_2_code code;
  union {
    void* /* unit */ None_2;
    double Some_2;
  } payload;
} Option_2;

typedef struct Foo {
  char /* bool */ x;
  double y;
} Foo;

typedef struct Array_3 {
  double * content2;
  int length2;
} Array_3;

typedef struct Array_2 {
  Option_2 * content1;
  int length1;
} Array_2;

enum Bar_code {
  Bar_No,
  Bar_Yes
} Bar_code;

typedef struct Bar {
  enum Bar_code code;
  union {
    void* /* unit */ No;
    Foo Yes;
  } payload;
} Bar;

typedef struct Baz {
  double b;
  Array_3 c;
} Baz;

enum Option_3_code {
  Option_3_None_3,
  Option_3_Some_3
} Option_3_code;

typedef struct Option_3 {
  enum Option_3_code code;
  union {
    void* /* unit */ None_3;
    Array_3 Some_3;
  } payload;
} Option_3;

enum Option_1_code {
  Option_1_None_1,
  Option_1_Some_1
} Option_1_code;

typedef struct Option_1 {
  enum Option_1_code code;
  union {
    void* /* unit */ None_1;
    Bar Some_1;
  } payload;
} Option_1;

typedef struct Array_4 {
  Option_3 * content3;
  int length3;
} Array_4;

typedef struct Array_1 {
  Option_1 * content;
  int length;
} Array_1;

typedef struct Tuple_1 {
  Option_1 (*elt_0)(void * /* closure_env */ arg_0_typ, void* /* unit */ arg_1_typ);
  void * /* closure_env */ elt_1;
} Tuple_1;

typedef struct Baz_in {
  Tuple_1 a_in;
} Baz_in;


Baz baz(Baz_in baz_in) {
  Tuple_1 a;
  a = baz_in.a_in;
  Bar a2;
  option_1 a3;
  Tuple_1 code_and_env;
  code_and_env = a;
  Option_1 (*code)(void * /* closure_env */ arg_0_typ, void* /* unit */ arg_1_typ);
  void * /* closure_env */ env;
  code = code_and_env.elt_0;
  env = code_and_env.elt_1;
  Array_1 a4;
  a4.content_field = catala_malloc(sizeof(Array_1));
  a4.content_field[0] = code(env, NULL);
  Option_1 match_arg = catala_handle_exceptions(a4);
  switch (match_arg.code) {
    case Option_1_None_1:
      if (1 /* TRUE */) {
        Bar a3;
        option_1 a4;
        option_1 a6;
        Array_1 a7;
        a7.content_field = catala_malloc(sizeof(Array_1));
        
        Option_1 match_arg = catala_handle_exceptions(a7);
        switch (match_arg.code) {
          case Option_1_None_1:
            if (1 /* TRUE */) {
              Bar a6 = {Bar_No, {No: NULL}};
              option_1 a6 = {Option_1_Some_1, {Some_1: a6}};
              
            } else {
              option_1 a6 = {Option_1_None_1, {None_1: NULL}};
              
            }
            break;
          case Option_1_Some_1:
            Bar x1 = match_arg.payload.Some_1;
            option_1 a6 = {Option_1_Some_1, {Some_1: x1}};
            break;
        }
        Array_1 a5;
        a5.content_field = catala_malloc(sizeof(Array_1));
        a5.content_field[0] = a6;
        Option_1 match_arg = catala_handle_exceptions(a5);
        switch (match_arg.code) {
          case Option_1_None_1:
            if (0 /* FALSE */) {
              option_1 a4 = {Option_1_None_1, {None_1: NULL}};
              
            } else {
              option_1 a4 = {Option_1_None_1, {None_1: NULL}};
              
            }
            break;
          case Option_1_Some_1:
            Bar x1 = match_arg.payload.Some_1;
            option_1 a4 = {Option_1_Some_1, {Some_1: x1}};
            break;
        }
        Option_1 match_arg = a4;
        switch (match_arg.code) {
          case Option_1_None_1:
            catala_raise_fatal_error (catala_no_value,
              "tests/backends/simple.catala_en", 11, 11, 11, 12);
            break;
          case Option_1_Some_1:
            Bar arg = match_arg.payload.Some_1;
            a3 = arg;
            break;
        }
        option_1 a3 = {Option_1_Some_1, {Some_1: a3}};
        
      } else {
        option_1 a3 = {Option_1_None_1, {None_1: NULL}};
        
      }
      break;
    case Option_1_Some_1:
      Bar x1 = match_arg.payload.Some_1;
      option_1 a3 = {Option_1_Some_1, {Some_1: x1}};
      break;
  }
  Option_1 match_arg = a3;
  switch (match_arg.code) {
    case Option_1_None_1:
      catala_raise_fatal_error (catala_no_value,
        "tests/backends/simple.catala_en", 11, 11, 11, 12);
      break;
    case Option_1_Some_1:
      Bar arg = match_arg.payload.Some_1;
      a2 = arg;
      break;
  }
  Bar a1;
  a1 = a2;
  double b2;
  option_2 b3;
  option_2 b5;
  option_2 b7;
  ┌─[ERROR]─
│
│  Unexpected error: Not_found
│
└─
#return code 125#
